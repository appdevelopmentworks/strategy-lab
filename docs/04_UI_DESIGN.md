# StrategyLab UI設計書

## 1. 画面一覧

| 画面ID | 画面名 | パス | 説明 |
|--------|--------|------|------|
| SC001 | ダッシュボード | `/` | メイン画面、ティッカー入力とタブナビゲーション |
| SC002 | 結果一覧 | `/` (タブ) | バックテスト結果のテーブルと棒グラフ |
| SC003 | チャート | `/` (タブ) | 価格チャートと売買ポイント表示 |
| SC004 | パラメーター | `/` (タブ) | 戦略パラメーター調整 |
| SC005 | 最適化 | `/` (タブ) | グリッドサーチと最適化 |
| SC006 | エクスポート | `/export` | コード生成とデータ出力 |
| SC007 | 設定 | `/settings` | アプリ設定 |

---

## 2. 画面レイアウト

### 2.1 全体構成

```
┌─────────────────────────────────────────────────────────────────────┐
│                           ヘッダー                                  │
│  ロゴ                                    [設定] [エクスポート]       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    入力エリア                                │   │
│  │  ティッカー: [____] 期間: [▼] 最低トレード: [__] [▶分析]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  [📊結果一覧] [📈チャート] [⚙️パラメーター] [🔍最適化]       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │                    メインコンテンツ                          │   │
│  │                    （タブに応じて変化）                       │   │
│  │                                                             │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 3. コンポーネント設計

### 3.1 ヘッダー (Header)

```
┌─────────────────────────────────────────────────────────────────┐
│ 📈 StrategyLab                      [🌙] [⚙️設定] [📤Export]   │
└─────────────────────────────────────────────────────────────────┘
```

| 要素 | 説明 |
|------|------|
| ロゴ | アプリ名とアイコン |
| ダークモード切替 | 🌙/☀️ トグル |
| 設定ボタン | 設定画面へ遷移 |
| Exportボタン | エクスポート画面へ遷移 |

### 3.2 入力エリア (InputSection)

```
┌─────────────────────────────────────────────────────────────────┐
│ ティッカー                                                      │
│ ┌─────────────────────────────────────────────────────────┐    │
│ │ AAPL, NVDA, 7203.T                            [×] [+]  │    │
│ └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│ 期間: [5年 ▼]   最低トレード数: [30 ▼]   目標関数: [勝率 ▼]    │
│                                                                 │
│                                    [▶ 分析開始]                 │
└─────────────────────────────────────────────────────────────────┘
```

| 要素 | 型 | 説明 |
|------|-----|------|
| ティッカー入力 | テキスト（複数可） | カンマ区切りで最大5銘柄 |
| 期間選択 | セレクト | 1年/3年/5年/10年 |
| 最低トレード数 | セレクト | 10/20/30/50回 |
| 目標関数 | セレクト | 勝率/リターン/PF/シャープ |
| 分析開始ボタン | ボタン | バックテスト実行 |

### 3.3 結果一覧タブ (ResultsTab)

```
┌─────────────────────────────────────────────────────────────────┐
│ ソート: [勝率▼] [リターン] [PF] [シャープ] [DD]                 │
│ フィルター: 勝率≥[50]% トレード≥[30]回 [適用] [リセット]        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ 棒グラフ ─────────────────────────────────────────────┐   │
│  │ RSI逆張り       ████████████████████████████ 72.5%    │   │
│  │ MACDシグナル    █████████████████████████ 68.3%       │   │
│  │ BB逆張り        ███████████████████████ 65.1%         │   │
│  │ EMAクロス       █████████████████████ 62.8%           │   │
│  │ ストキャス      ███████████████████ 60.2%             │   │
│  └────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─ テーブル ─────────────────────────────────────────────┐   │
│  │ 戦略名    │勝率  │回数│平均益│平均損│リターン│PF  │DD  │   │
│  │-----------|------|----|----- |------|--------|----|----|   │
│  │ RSI逆張り │72.5% │ 45 │+3.2% │-1.8% │ +156%  │2.4 │-12%│   │
│  │ MACD      │68.3% │ 38 │+4.1% │-2.2% │ +134%  │2.1 │-15%│   │
│  │ ...       │      │    │      │      │        │    │    │   │
│  └────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ページネーション: [< 1 2 3 4 5 >]                              │
└─────────────────────────────────────────────────────────────────┘
```

### 3.4 チャートタブ (ChartTab)

```
┌─────────────────────────────────────────────────────────────────┐
│ 銘柄: [AAPL▼]  戦略: [RSI逆張り▼]  表示: [ローソク足▼] [ライン]│
│ 期間: [全期間] [1Y] [6M] [3M] [1M]                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  250 ┤                                          ╭──────        │
│      │                              ▲          ╱               │
│  200 ┤                    ╭────────╯─────────╮╱                │
│      │          ▲        ╱        ▼          ╲                 │
│  150 ┤    ╭────╯────────╯                     ╲        ▲      │
│      │   ╱     ▼                               ╲      ╱       │
│  100 ┤──╯                                       ╲────╯        │
│      │                                           ▼             │
│   50 ┼────┬────┬────┬────┬────┬────┬────┬────┬────┬────       │
│      Jan  Mar  May  Jul  Sep  Nov  Jan  Mar  May  Jul          │
│                                                                 │
│  ▲ 買い (緑)   ▼ 売り (赤)                                     │
│                                                                 │
│  ┌─ ツールチップ（ホバー時）──────────────────────┐            │
│  │ 日付: 2024-03-15                             │            │
│  │ 価格: $178.50                                │            │
│  │ シグナル: 買い                               │            │
│  │ 戦略: RSI逆張り                              │            │
│  │ RSI値: 28.5                                  │            │
│  └───────────────────────────────────────────────┘            │
└─────────────────────────────────────────────────────────────────┘
```

### 3.5 パラメータータブ (ParameterTab)

```
┌─────────────────────────────────────────────────────────────────┐
│ 戦略選択: [RSI逆張り ▼]                    [保存] [リセット]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ パラメーター設定 ────────────────────────────────────────┐ │
│  │                                                           │ │
│  │  RSI期間                                                  │ │
│  │  [5]────────●────────────────────────────[30]  値: [14]   │ │
│  │                                                           │ │
│  │  売られすぎ水準                                           │ │
│  │  [10]───●────────────────────────────────[40]  値: [30]   │ │
│  │                                                           │ │
│  │  買われすぎ水準                                           │ │
│  │  [60]────────────────────────────────●───[90]  値: [70]   │ │
│  │                                                           │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─ リアルタイム結果プレビュー ──────────────────────────────┐ │
│  │ 勝率: 72.5% → 74.2% (+1.7%)                              │ │
│  │ リターン: +156% → +168% (+12%)                            │ │
│  │ トレード回数: 45 → 42 (-3)                                │ │
│  │ PF: 2.4 → 2.6                                             │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  保存済みプリセット: [デフォルト▼] [保守的] [積極的] [+新規]   │
└─────────────────────────────────────────────────────────────────┘
```

### 3.6 最適化タブ (OptimizationTab)

```
┌─────────────────────────────────────────────────────────────────┐
│ 戦略: [RSI逆張り▼]  目標: [勝率最大化▼]  検証: [ウォークフォワード]│
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─ グリッドサーチ設定 ──────────────────────────────────────┐ │
│  │                                                           │ │
│  │  RSI期間:      [10] ～ [20]  ステップ: [2]                │ │
│  │  売られすぎ:   [20] ～ [35]  ステップ: [5]                │ │
│  │  買われすぎ:   [65] ～ [80]  ステップ: [5]                │ │
│  │                                                           │ │
│  │  組み合わせ数: 180パターン                                │ │
│  │  推定所要時間: 約45秒                                     │ │
│  │                                                           │ │
│  │                        [▶ 最適化開始]                     │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─ 最適化結果 ──────────────────────────────────────────────┐ │
│  │                                                           │ │
│  │  🏆 最適パラメーター                                      │ │
│  │  RSI期間: 12, 売られすぎ: 25, 買われすぎ: 75              │ │
│  │                                                           │ │
│  │  学習期間結果:  勝率 76.2%, リターン +182%                 │ │
│  │  検証期間結果:  勝率 71.8%, リターン +145%                 │ │
│  │  過学習リスク:  低 ✅                                      │ │
│  │                                                           │ │
│  │                    [適用] [エクスポート]                   │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  進捗: [████████████████████░░░░░░░░] 68% (122/180)            │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. レスポンシブ対応

### 4.1 ブレークポイント

| 名前 | 幅 | 対象デバイス |
|------|-----|-------------|
| sm | 640px | モバイル |
| md | 768px | タブレット |
| lg | 1024px | デスクトップ（小） |
| xl | 1280px | デスクトップ（大） |

### 4.2 モバイルレイアウト（< 768px）

- タブをボトムナビゲーションに変更
- 棒グラフを縦向きに変更
- テーブルをカード形式に変更
- パラメータースライダーを全幅表示

---

## 5. カラーパレット

### 5.1 ライトモード

| 用途 | 色コード | 説明 |
|------|---------|------|
| Primary | `#2563eb` | メインアクション |
| Success | `#16a34a` | 買いシグナル、利益 |
| Danger | `#dc2626` | 売りシグナル、損失 |
| Background | `#ffffff` | 背景 |
| Surface | `#f8fafc` | カード背景 |
| Text | `#0f172a` | テキスト |
| Border | `#e2e8f0` | ボーダー |

### 5.2 ダークモード

| 用途 | 色コード | 説明 |
|------|---------|------|
| Primary | `#3b82f6` | メインアクション |
| Success | `#22c55e` | 買いシグナル、利益 |
| Danger | `#ef4444` | 売りシグナル、損失 |
| Background | `#0f172a` | 背景 |
| Surface | `#1e293b` | カード背景 |
| Text | `#f8fafc` | テキスト |
| Border | `#334155` | ボーダー |

---

## 6. アイコン

Lucide Reactを使用：

| 用途 | アイコン |
|------|---------|
| 結果一覧 | `BarChart3` |
| チャート | `LineChart` |
| パラメーター | `Settings` |
| 最適化 | `Search` |
| 買いシグナル | `TrendingUp` |
| 売りシグナル | `TrendingDown` |
| エクスポート | `Download` |
| 保存 | `Save` |
| リセット | `RotateCcw` |

---

## 7. 更新履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2024-12-23 | 1.0 | 初版作成 |
