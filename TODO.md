# StrategyLab 開発 TODO リスト

## 概要
- **プロジェクト名**: StrategyLab
- **開始日**: 2024-12-24
- **バージョン**: 1.5.0

---

## 進捗サマリー

| Phase | 内容 | 状態 | 進捗 |
|-------|------|------|------|
| 1 | プロジェクト基盤 | ✅ 完了 | 100% |
| 2 | バックテストエンジン | ✅ 完了 | 100% |
| 3 | 結果一覧・可視化 | ✅ 完了 | 100% |
| 4 | チャート表示 | ✅ 完了 | 100% |
| 5 | パラメーター調整 | ✅ 完了 | 100% |
| 6 | 戦略サーチ・最適化 | ✅ 完了 | 100% |
| 7 | エクスポート機能 | ✅ 完了 | 100% |
| 8 | 複数銘柄比較・仕上げ | ✅ 完了 | 100% |
| 9 | グリッドサーチ最適化 | ✅ 完了 | 100% |
| 10 | モンテカルロシミュレーション | ✅ 完了 | 100% |
| 11 | ウォークフォワード検証 | ✅ 完了 | 100% |
| 12 | ポートフォリオ最適化 | ✅ 完了 | 100% |
| 13 | 資金管理指標 | ✅ 完了 | 100% |

**全体進捗: 100% 完了 🎉**

---

## 実装済み戦略一覧（72戦略）

### トレンドフォロー系（13戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| TF001 | SMAクロスオーバー | ✅ |
| TF002 | EMAクロスオーバー | ✅ |
| TF003 | MACDシグナル | ✅ |
| TF004 | ADXトレンド | ✅ |
| TF005 | パラボリックSAR | ✅ |
| TF006 | スーパートレンド | ✅ |
| TF007 | 一目均衡表・雲ブレイク | ✅ |
| TF008 | DMI（方向性指数） | ✅ |
| TF009 | KAMA（適応型MA） | ✅ |
| TF010 | 平均足 | ✅ |
| TF011 | トリプルMA | ✅ |
| TF012 | アルーン | ✅ |
| TF013 | チョピネス指数 | ✅ |

### モメンタム系（11戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| MO001 | RSI順張り | ✅ |
| MO002 | RSI逆張り | ✅ |
| MO003 | ストキャスティクス | ✅ |
| MO004 | CCI | ✅ |
| MO005 | ウィリアムズ%R | ✅ |
| MO006 | ROC（変化率） | ✅ |
| MO007 | モメンタム | ✅ |
| MO008 | RCI（順位相関指数） | ✅ |
| MO009 | TRIX | ✅ |
| MO010 | DEMAクロス | ✅ |
| MO011 | フォースインデックス | ✅ |

### ブレイクアウト系（10戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| BO001 | ボリンジャーバンド・ブレイクアウト | ✅ |
| BO002 | ドンチャンチャネル | ✅ |
| BO003 | ケルトナーチャネル | ✅ |
| BO004 | 52週高値ブレイク | ✅ |
| BO005 | ATRブレイクアウト | ✅ |
| BO006 | ボリンジャースクイーズ | ✅ |
| BO007 | ATRトレーリングストップ | ✅ |
| BO008 | シャンデリアエグジット | ✅ |
| BO009 | ギャップ戦略 | ✅ |
| BO010 | ボラティリティブレイクアウト | ✅ |

### ミーンリバーサル系（5戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| MR001 | ボリンジャーバンド逆張り | ✅ |
| MR002 | RSIダイバージェンス | ✅ |
| MR003 | 移動平均乖離率 | ✅ |
| MR004 | Zスコア | ✅ |
| MR005 | エンベロープ | ✅ |

### ボリューム系（7戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| VO001 | OBV（出来高） | ✅ |
| VO002 | VWAPリバーサル | ✅ |
| VO003 | ボリュームブレイクアウト | ✅ |
| VO004 | MFI（マネーフロー） | ✅ |
| VO005 | CMF（チャイキンマネーフロー） | ✅ |
| VO006 | 出来高スパイク | ✅ |
| VO007 | VWMA（出来高加重MA） | ✅ |

### パターン認識系（5戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| PA001 | ゴールデンクロス | ✅ |
| PA002 | デッドクロス | ✅ |
| PA003 | 三役好転（一目均衡表） | ✅ |
| PA004 | ダブルボトム | ✅ |
| PA005 | ヘッドアンドショルダー | ✅ |

### 複合系（11戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| CO001 | MACD+RSIフィルター | ✅ |
| CO002 | トレンド+モメンタム | ✅ |
| CO003 | ボラティリティ調整 | ✅ |
| CO004 | 移動平均リボン | ✅ |
| CO005 | 高値安値チャネル | ✅ |
| CO006 | ピボットポイント | ✅ |
| CO007 | フィボナッチ | ✅ |
| CO008 | ハイローブレイクアウト | ✅ |
| CO009 | タートルズ | ✅ |
| CO010 | 季節性戦略 | ✅ |
| CO011 | 週足ピボット | ✅ |

### カレンダー系（10戦略）
| ID | 戦略名 | 状態 |
|----|--------|------|
| CA001 | 月曜買い・金曜売り | ✅ |
| CA002 | 金曜買い・月曜売り | ✅ |
| CA003 | 火曜買い・木曜売り | ✅ |
| CA004 | 月初買い・月末売り | ✅ |
| CA005 | 月末買い・月初売り | ✅ |
| FH001 | 1日保有 | ✅ |
| FH002 | 3日保有 | ✅ |
| FH003 | 5日保有 | ✅ |
| FH004 | 10日保有 | ✅ |
| FH005 | 20日保有 | ✅ |

---

## 最適化機能（v1.2.0〜v1.4.0）

### グリッドサーチ最適化（v1.2.0）
- ✅ パラメーター範囲指定（min/max/step）
- ✅ 目標関数選択（勝率/総リターン/PF/シャープレシオ）
- ✅ 最大5,000組み合わせ検証
- ✅ 最適パラメーター自動検出
- ✅ トップ100結果表示
- ✅ スコア分布チャート

### モンテカルロシミュレーション（v1.2.0）
- ✅ トレード順序シャッフル方式
- ✅ ブートストラップ（復元抽出）方式
- ✅ リターン分布（5%/25%/50%/75%/95%タイル）
- ✅ ドローダウン分布
- ✅ リスク指標（VaR, CVaR, 損失確率, 破産確率）
- ✅ サンプル資産曲線表示
- ✅ 100〜10,000回シミュレーション対応

### ウォークフォワード検証（v1.4.0 NEW）
- ✅ ローリングウィンドウ方式
- ✅ アンカード（固定起点）方式
- ✅ 訓練/検証期間分割（2〜10ウィンドウ）
- ✅ 訓練比率設定（50%〜80%）
- ✅ 過学習リスク評価（低/中/高）
- ✅ 堅牢性スコア計算
- ✅ 一貫性（プラスリターン率）計算
- ✅ 訓練期間 vs 検証期間の比較チャート
- ✅ 推奨事項の自動生成

### ポートフォリオ最適化（v1.4.0 NEW）
- ✅ 均等配分（Equal Weight）
- ✅ リスクパリティ（Risk Parity）
- ✅ 最大シャープレシオ（Max Sharpe）
- ✅ 最小分散（Min Variance）
- ✅ 最大リターン（Max Return）
- ✅ 相関行列計算・表示
- ✅ 効率的フロンティア生成
- ✅ ウェイト配分チャート
- ✅ 分散比率計算
- ✅ 複数戦略・銘柄の組み合わせ

---

## テクニカル指標一覧

### 基本指標
- SMA, EMA, WMA, DEMA, KAMA
- RSI, ストキャスティクス, CCI, ウィリアムズ%R
- MACD, ADX, ATR
- ボリンジャーバンド, ケルトナーチャネル, ドンチャンチャネル
- OBV, MFI, VWAP

### 拡張指標（v1.1.0追加）
- TRIX（トリプルEMA）
- CMF（チャイキンマネーフロー）
- DMI（方向性指数）
- シャンデリアエグジット
- アルーン指標
- チョピネス指数
- フォースインデックス
- 平均足（Heiken Ashi）
- ボリンジャーバンド幅
- VWMA（出来高加重MA）
- エンベロープ

---

## 実装済み機能一覧

### コア機能
- ✅ Yahoo Finance API連携
- ✅ 72種類のトレード戦略
- ✅ バックテストエンジン
- ✅ パフォーマンス指標計算
- ✅ グリッドサーチ最適化
- ✅ モンテカルロシミュレーション
- ✅ ウォークフォワード検証
- ✅ ポートフォリオ最適化

### UI機能
- ✅ ティッカー入力（最大5銘柄）
- ✅ 期間選択（3ヶ月〜10年）
- ✅ 最低トレード数フィルター（0回〜）
- ✅ 結果テーブル（ソート・フィルター）
- ✅ 比較チャート（棒グラフ）
- ✅ 価格チャート（ローソク足/ライン）
- ✅ 売買シグナル表示
- ✅ パラメーター調整パネル
- ✅ プリセット保存
- ✅ 複数銘柄比較
- ✅ 最適化パネル（グリッドサーチ/モンテカルロ/WF/ポートフォリオ）
- ✅ エクスポートパネル
- ✅ ダークモード
- ✅ ローディング画面
- ✅ エラーハンドリング

### エクスポート
- ✅ CSV/JSON形式
- ✅ PineScript生成
- ✅ MQL4/MQL5生成

---

## 戦略カテゴリ別サマリー

| カテゴリ | 戦略数 |
|----------|--------|
| トレンドフォロー | 13 |
| モメンタム | 11 |
| ブレイクアウト | 10 |
| ミーンリバーサル | 5 |
| ボリューム | 7 |
| パターン認識 | 5 |
| 複合 | 11 |
| カレンダー | 10 |
| **合計** | **72** |

---

## 資金管理指標（v1.5.0 NEW）

### 追加された指標
| 指標 | 説明 | 用途 |
|------|------|------|
| 期待値（Expectancy） | 1トレードあたりの期待利益% | 正の期待値戦略のみ採用 |
| ペイオフレシオ | 平均利益÷平均損失 | リスク/リワード評価 |
| リカバリーファクター | 総リターン÷最大DD | 回復力の評価 |
| ケリー基準 | 最適ポジションサイズ% | サイズ決定の基準 |
| 日次ボラティリティ | 日次リターンの標準偏差% | リスク管理 |
| 平均ATR% | 終値に対するATR | ロットサイズ調整 |
| CAGR | 年率換算リターン | 年間パフォーマンス |
| カルマーレシオ | CAGR÷最大DD | リスク調整後リターン |
| 破産確率（目安） | 簡易リスクオブルーイン | リスク警告 |

### 使い方
1. **最大ドローダウン** → 許容DDを決めてサイズ上限を設定
2. **期待値** → 正の期待値の戦略だけを採用
3. **ATR%・日次Vol** → ATR×係数で許容損失を固定しロット調整
4. **最大連敗数** → 連敗時の縮小ルール作成（例: 連敗3で半分）
5. **ケリー基準** → 理論上の最適サイズ（実運用は半ケリー推奨）

### UI
- 結果テーブルに「資金管理」タブ追加
- エクスポート（CSV/JSON）に全指標含む
- 指標の説明をUI内に表示

---

## 今後の拡張案

### 高度な機能
- [ ] リアルタイムデータ対応
- [ ] アラート機能
- [ ] ユーザー認証
- [ ] クラウド保存
- [ ] マルチタイムフレーム分析
- [ ] 機械学習による戦略生成

---

## 更新履歴

- 2024-12-24: プロジェクト開始
- 2024-12-24: Phase 1-8 完了（42戦略）
- 2024-12-24: v1.0.0 リリース
- 2024-12-24: v1.1.0 - 20戦略追加（計62戦略）
- 2024-12-24: v1.2.0 - グリッドサーチ最適化・モンテカルロシミュレーション追加
- 2024-12-24: v1.3.0 - カレンダー戦略追加（曜日効果・固定保有・月初月末）72戦略
- 2024-12-24: v1.4.0 - ウォークフォワード検証・ポートフォリオ最適化追加
- 2024-12-24: v1.5.0 - 資金管理指標追加（期待値・ペイオフ・RF・Kelly・ATR・CAGR・Calmar等）🎉
